$(document).ready(()=>{'use strict';const a=_getAaIntelToolJsSettings(),t={shipClassesAllTable:$('table.aa-intel-dscan-ship-classes-all-list'),dscanCountAll:$('span#aa-intel-dscan-all-count'),dscanMassAll:$('span#aa-intel-dscan-all-mass'),shipClassesOngridTable:$('table.aa-intel-dscan-ship-classes-ongrid-list'),dscanCountOngrid:$('span#aa-intel-dscan-ongrid-count'),dscanMassOnGrid:$('span#aa-intel-dscan-ongrid-mass'),shipClassesOffgridTable:$('table.aa-intel-dscan-ship-classes-offgrid-list'),dscanCountOffgrid:$('span#aa-intel-dscan-offgrid-count'),dscanMassOffGrid:$('span#aa-intel-dscan-offgrid-mass'),shipTypesTable:$('table.aa-intel-dscan-ship-types-list'),upwellStructuresTable:$('table.aa-intel-dscan-upwell-structures-list'),dscanCountUpwellStructures:$('span#aa-intel-dscan-upwell-structures-count'),deployablesTable:$('table.aa-intel-dscan-deployables-list'),dscanCountDeployables:$('span#aa-intel-dscan-deployables-count'),starbasesTable:$('table.aa-intel-dscan-starbases-list'),dscanCountStarbases:$('span#aa-intel-dscan-starbases-count')},e=[{target:0,createdCell:a=>$(a).addClass('text-ellipsis fix-eve-image-position')},{target:1,width:35,createdCell:a=>$(a).addClass('text-end'),columnControl:_removeSearchFromColumnControl(a.dataTables.columnControl,1)}],s=t=>{fetchGet({url:t.url}).then(s=>{if(!s)return;if($(`div.aa-intel-loading-table-info-${t.loadingKey||t.key}`).addClass('d-none'),0===Object.keys(s).length)return void $(`div.aa-intel-empty-table-info-${t.loadingKey||t.key}`).removeClass('d-none');t.containerSelector&&$(t.containerSelector).removeClass('d-none'),t.extraSelectors&&t.extraSelectors.forEach(a=>$(a).removeClass('d-none'));new DataTable(t.tableEl,{data:s,paging:!1,language:a.language.dataTables,lengthChange:!1,dom:a.dataTables.dom,ordering:a.dataTables.ordering,columnControl:a.dataTables.columnControl,columns:t.columns,order:[[1,'desc']],columnDefs:e,createdRow:(e,s)=>{if(t.countEl){const a=parseInt(t.countEl.html())||0;t.countEl.html(a+(s.count||0))}if(t.massEl){const e=(parseInt(t.massEl.data('mass'))||0)+(s.mass||0);t.massEl.data('mass',e),t.massEl.html(numberFormatter({value:e,locales:a.language.django}))}t.rowItemClass&&$(e).addClass(t.rowItemClass),t.idAttr&&$(e).attr(t.idAttr,s.id),t.typeIdAttr&&void 0!==s.type_id&&$(e).attr(t.typeIdAttr,s.type_id),t.extraRowClass&&$(e).addClass(t.extraRowClass)},initComplete:()=>{if(t.rowItemClass){const a=`.${t.rowItemClass.split(' ').join('.')}`,e=$(a);_toggleDscanStickyHighlight({element:e,type:t.highlightType||'shipclass',highlightOnly:!!t.highlightOnly})}t.tooltipSelector&&bootstrapTooltip({selector:t.tooltipSelector})}})}).catch(a=>{console.error(`Error fetching ${t.key} data:`,a)})};s({key:'all',loadingKey:'all',tableEl:t.shipClassesAllTable,url:a.url.getShipClassesAll,containerSelector:'div.table-dscan-ship-classes-all',rowItemClass:'aa-intel-shipclass-all-item',extraRowClass:null,idAttr:'data-shipclass-id',typeIdAttr:'data-shiptype-id',countEl:t.dscanCountAll,massEl:t.dscanMassAll,columns:[{data:a=>shipInfoPanel(a)},{data:'count'}],tooltipSelector:'.aa-intel-dscan-ship-classes-all-list'}),s({key:'ongrid',loadingKey:'ongrid',tableEl:t.shipClassesOngridTable,url:a.url.getShipClassesOngrid,containerSelector:'div.table-dscan-ship-classes-ongrid',rowItemClass:'aa-intel-shipclass-ongrid-item',idAttr:'data-shipclass-id',typeIdAttr:'data-shiptype-id',countEl:t.dscanCountOngrid,massEl:t.dscanMassOnGrid,columns:[{data:a=>shipInfoPanel(a)},{data:'count'}],tooltipSelector:'.aa-intel-dscan-ship-classes-ongrid-list'}),s({key:'offgrid',loadingKey:'offgrid',tableEl:t.shipClassesOffgridTable,url:a.url.getShipClassesOffgrid,containerSelector:'div.table-dscan-ship-classes-offgrid',rowItemClass:'aa-intel-shipclass-offgrid-item',idAttr:'data-shipclass-id',typeIdAttr:'data-shiptype-id',countEl:t.dscanCountOffgrid,massEl:t.dscanMassOffGrid,columns:[{data:a=>shipInfoPanel(a)},{data:'count'}],tooltipSelector:'.aa-intel-dscan-ship-classes-offgrid-list'}),s({key:'ship-types',loadingKey:'ship-types',tableEl:t.shipTypesTable,url:a.url.getShipTypes,containerSelector:'div.table-dscan-ship-types',rowItemClass:'aa-intel-shiptype-item',idAttr:'data-shiptype-id',columns:[{data:'name'},{data:'count'}],highlightType:'shiptype'}),s({key:'upwell-structures',loadingKey:'upwell-structures',tableEl:t.upwellStructuresTable,url:a.url.getStructuresOnGrid,containerSelector:'div#aa-intel-dscan-row-interesting-on-grid',extraSelectors:['div.col-aa-intel-upwell-structures'],rowItemClass:'aa-intel-structuretype-item',idAttr:'data-structuretype-id',countEl:t.dscanCountUpwellStructures,columns:[{data:a=>shipInfoPanel(a)},{data:'count'}],highlightOnly:!0,tooltipSelector:'.aa-intel-dscan-upwell-structures-list'}),s({key:'deployables',loadingKey:'deployables',tableEl:t.deployablesTable,url:a.url.getDeployablesOnGrid,containerSelector:'div#aa-intel-dscan-row-interesting-on-grid',extraSelectors:['div.col-aa-intel-deployables'],rowItemClass:'aa-intel-deployabletype-item',idAttr:'data-deployabletype-id',countEl:t.dscanCountDeployables,columns:[{data:a=>shipInfoPanel(a)},{data:'count'}],highlightOnly:!0,tooltipSelector:'.aa-intel-dscan-deployables-list'}),s({key:'starbases',loadingKey:'starbases',tableEl:t.starbasesTable,url:a.url.getStarbasesOnGrid,containerSelector:'div#aa-intel-dscan-row-interesting-on-grid',extraSelectors:['div.col-aa-intel-starbases'],rowItemClass:'aa-intel-starbasetype-item',idAttr:'data-starbasetype-id',countEl:t.dscanCountStarbases,columns:[{data:a=>shipInfoPanel(a)},{data:'count'}],highlightOnly:!0,tooltipSelector:'.aa-intel-dscan-starbases-list'})});
//# sourceMappingURL=aa-intel-tool-dscan.min.js.map