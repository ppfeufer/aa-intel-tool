jQuery(document).ready($=>{"use strict";const elementPilotsTable=$("table.aa-intel-pilot-participation-list");const elementCorporationsTable=$("table.aa-intel-corporation-participation-list");const elementAlliancesTable=$("table.aa-intel-alliance-participation-list");const elementPilotsTotalCount=$("span#aa-intel-pilots-count");const elementCorporationsTotalCount=$("span#aa-intel-corporations-count");const elementAlliancesTotalCount=$("span#aa-intel-alliances-count");const pilotInfoPanel=pilotData=>{let html_logo=""+'<span class="aa-intel-pilot-avatar-wrapper">\n'+"    <img "+'        class="eve-image" '+'        data-eveid="'+pilotData.id+'" '+'        src="'+pilotData.portrait+'" '+'        alt="'+pilotData.name+'" '+'        title="'+pilotData.name+'" '+'        width="32" '+'        height="32">\n'+"</span>";let html_info=""+'<span class="aa-intel-pilot-information-wrapper">\n'+'    <span class="aa-intel-pilot-name-wrapper">\n'+"        "+pilotData.name+"\n"+"    </span>\n";html_info+=""+'    <span class="aa-intel-corporation-links-wrapper">\n'+"        <small>\n";html_info+=""+'    <span class="aa-intel-pilot-links-wrapper">\n'+"        <small>\n"+"            <a "+'                class="aa-intel-information-link" '+'                href="'+pilotData.evewho+'" '+'                target="_blank" '+'                rel="noopener noreferer"'+"            >"+'               evewho <i class="fas fa-external-link-alt" aria-hidden="true"></i>'+"            </a> |\n"+"            <a "+'                class="aa-intel-information-link" '+'                href="'+pilotData.zkillboard+'" '+'                target="_blank" rel="noopener noreferer"'+"            >"+'                zkillboard <i class="fas fa-external-link-alt" aria-hidden="true"></i>'+"            </a>\n"+"        </small>\n"+"    </span>\n";return html_logo+html_info};const corporationInfoPanel=(corporationData,logoOnly)=>{logoOnly=typeof logoOnly!=="undefined"?logoOnly:false;let html_logo=""+'<span class="aa-intel-corporation-logo-wrapper">\n'+"    <img "+'        class="eve-image" '+'        data-eveid="'+corporationData.id+'" '+'        src="'+corporationData.logo+'" '+'        alt="'+corporationData.name+'" '+'        title="'+corporationData.name+'" '+'        width="32" '+'        height="32">\n'+"</span>";let html_info=""+'<span class="aa-intel-corporation-information-wrapper">\n'+'    <span class="aa-intel-corporation-name-wrapper">\n'+"        "+corporationData.name+"\n"+"    </span>\n";html_info+=""+'    <span class="aa-intel-corporation-links-wrapper">\n'+"        <small>\n";if(1e6<=corporationData.id&&corporationData.id<=2e6){html_info+=""+"            ("+aaIntelToolJsL10n.scanData.npcCorp+")"}else{html_info+=""+"            <a "+'                class="aa-intel-information-link" '+'                href="'+corporationData.dotlan+'" '+'                target="_blank" '+'                rel="noopener noreferer"'+"            >"+'               dotlan <i class="fas fa-external-link-alt" aria-hidden="true"></i>'+"            </a> |\n"+"            <a "+'                class="aa-intel-information-link" '+'                href="'+corporationData.zkillboard+'" '+'                target="_blank" rel="noopener noreferer"'+"            >"+'                zkillboard <i class="fas fa-external-link-alt" aria-hidden="true"></i>'+"            </a>\n"+"        </small>\n"+"    </span>\n"}html_info+=""+"</span>";if(logoOnly){return html_logo}return html_logo+html_info};const allianceInfoPanel=(allianceData,logoOnly)=>{logoOnly=typeof logoOnly!=="undefined"?logoOnly:false;if(allianceData.name===""){allianceData.name=aaIntelToolJsL10n.scanData.empty}let html_logo=""+'<span class="aa-intel-alliance-logo-wrapper">\n'+"    <img "+'        class="eve-image" '+'        data-eveid="'+allianceData.id+'" '+'        src="'+allianceData.logo+'" '+'        alt="'+allianceData.name+'" '+'        title="'+allianceData.name+'" '+'        width="32" '+'        height="32">\n'+"</span>";let html_info=""+'<span class="aa-intel-alliance-information-wrapper">\n'+'    <span class="aa-intel-alliance-name-wrapper">\n'+"        "+allianceData.name+"\n"+"    </span>\n";if(allianceData.id>1){html_info+=""+'    <span class="aa-intel-alliance-links-wrapper">\n'+"        <small>\n"+"            <a "+'                class="aa-intel-information-link" '+'                href="'+allianceData.dotlan+'" '+'                target="_blank" '+'                rel="noopener noreferer"'+"            >"+'               dotlan <i class="fas fa-external-link-alt" aria-hidden="true"></i>'+"            </a> |\n"+"            <a "+'                class="aa-intel-information-link" '+'                href="'+allianceData.zkillboard+'" '+'                target="_blank" rel="noopener noreferer"'+"            >"+'                zkillboard <i class="fas fa-external-link-alt" aria-hidden="true"></i>'+"            </a>\n"+"        </small>\n"+"    </span>\n"}html_info+=""+"</span>";if(logoOnly){if(allianceData.id===1){return""}return html_logo}return html_logo+html_info};elementAlliancesTable.DataTable({paging:false,language:aaIntelToolJsL10n.dataTables.translation,lengthChange:false,dom:"<'row'<'col-sm-12'f>>"+"<'row'<'col-sm-12'tr>>"+"<'row'<'col-sm-12'i>>",ajax:{url:aaIntelToolJsOptions.ajax.getAllianceList,dataSrc:"",cache:true},columns:[{data:data=>{return allianceInfoPanel(data,false)}},{data:"count"},{data:"ticker"}],order:[[1,"desc"]],columnDefs:[{targets:1,createdCell:td=>{$(td).addClass("text-right")}},{targets:2,visible:false}],createdRow:(row,data)=>{const currentTotal=elementAlliancesTotalCount.html();const newTotal=parseInt(currentTotal)+1;elementAlliancesTotalCount.html(newTotal);$(row).addClass("aa-intel-alliance-participation-item aa-intel-alliance-id-"+data.id).attr("data-alliance-id",data.id);$(row).on("mouseenter",()=>{$(row).addClass("dataHighlight");corporationTableAddHighlightByAllianceId($(row));pilotTableAddHighlightByAllianceId($(row))}).on("mouseleave",()=>{$(row).removeClass("dataHighlight");corporationTableRemoveHighlightByAllianceId($(row));pilotTableRemoveHighlightByAllianceId($(row))});$(row).on("click",()=>{if($(row).hasClass("dataHighlightSticky")){$(row).removeClass("dataHighlightSticky");corporationTableRemoveStickyByAllianceId($(row));pilotTableRemoveStickyByAllianceId($(row))}else{$(row).addClass("dataHighlightSticky");corporationTableAddStickyByAllianceId($(row));pilotTableAddStickyByAllianceId($(row))}}).on("click",".aa-intel-information-link",e=>{e.stopPropagation()})}});elementCorporationsTable.DataTable({paging:false,language:aaIntelToolJsL10n.dataTables.translation,lengthChange:false,dom:"<'row'<'col-sm-12'f>>"+"<'row'<'col-sm-12'tr>>"+"<'row'<'col-sm-12'i>>",ajax:{url:aaIntelToolJsOptions.ajax.getCorporationList,dataSrc:"",cache:true},columns:[{data:data=>{return corporationInfoPanel(data,false)}},{data:"count"},{data:"ticker"}],order:[[1,"desc"]],columnDefs:[{targets:1,createdCell:td=>{$(td).addClass("text-right")}},{targets:2,visible:false}],createdRow:(row,data)=>{const currentTotal=elementCorporationsTotalCount.html();const newTotal=parseInt(currentTotal)+1;elementCorporationsTotalCount.html(newTotal);$(row).addClass("aa-intel-corporation-participation-item aa-intel-corporation-id-"+data.id).attr("data-corporation-id",data.id).attr("data-alliance-id",data.alliance.id);$(row).on("mouseenter",()=>{$(row).addClass("dataHighlight");allianceTableAddHighlightByAllianceId($(row));pilotTableAddHighlightByCorporationId($(row))}).on("mouseleave",()=>{$(row).removeClass("dataHighlight");allianceTableRemoveHighlightByAllianceId($(row));pilotTableRemoveHighlightByCorporationId($(row))});$(row).on("click",()=>{if($(row).hasClass("dataHighlightSticky")){$(row).removeClass("dataHighlightSticky");pilotTableRemoveStickyByCorporationId($(row));if(removeAllianceStickyComplete($(row))===true){allianceTableRemoveStickyByAllianceId($(row))}}else{$(row).addClass("dataHighlightSticky");allianceTableAddStickyByAllianceId($(row));pilotTableAddStickyByCorporationId($(row))}}).on("click",".aa-intel-information-link",e=>{e.stopPropagation()})}});elementPilotsTable.DataTable({paging:false,language:aaIntelToolJsL10n.dataTables.translation,lengthChange:false,dom:"<'row'<'col-sm-12'f>>"+"<'row'<'col-sm-12'tr>>"+"<'row'<'col-sm-12'i>>",ajax:{url:aaIntelToolJsOptions.ajax.getPilotList,dataSrc:"",cache:true},columns:[{data:data=>{return pilotInfoPanel(data)}},{data:data=>{return allianceInfoPanel(data.corporation.alliance,true)+data.corporation.alliance.ticker}},{data:data=>{return corporationInfoPanel(data.corporation,true)+data.corporation.ticker}},{data:"corporation.alliance.name"},{data:"corporation.name"}],order:[[0,"asc"]],columnDefs:[{targets:[3,4],visible:false}],createdRow:(row,data)=>{const currentTotal=elementPilotsTotalCount.html();const newTotal=parseInt(currentTotal)+1;elementPilotsTotalCount.html(newTotal);$(row).addClass("aa-intel-corporation-participation-item aa-intel-corporation-id-"+data.id).attr("data-character-id",data.id).attr("data-corporation-id",data.corporation.id).attr("data-alliance-id",data.corporation.alliance.id);$(row).on("mouseenter",()=>{$(row).addClass("dataHighlight");allianceTableAddHighlightByAllianceId($(row));corporationTableAddHighlightByCorporationId($(row))}).on("mouseleave",()=>{$(row).removeClass("dataHighlight");allianceTableRemoveHighlightByAllianceId($(row));corporationTableRemoveHighlightByCorporationId($(row))});$(row).on("click",()=>{if($(row).hasClass("dataHighlightSticky")){$(row).removeClass("dataHighlightSticky");if(removeCorporationStickyComplete($(row))===true){corporationTableRemoveStickyByCorporationId($(row))}if(removeAllianceStickyComplete($(row))===true){allianceTableRemoveStickyByAllianceId($(row))}}else{$(row).addClass("dataHighlightSticky");allianceTableAddStickyByAllianceId($(row));corporationTableAddStickyByCorporationId($(row))}}).on("click",".aa-intel-information-link",e=>{e.stopPropagation()})}});const removeCorporationStickyComplete=element=>{let removeCorporationSticky=true;$('table.aa-intel-pilot-participation-list tr[data-corporation-id="'+element.data("corporationId")+'"]').each((i,el)=>{if($(el).hasClass("dataHighlightSticky")){removeCorporationSticky=false}});return removeCorporationSticky};const removeAllianceStickyComplete=element=>{let removeAllianceSticky=true;$('table.aa-intel-pilot-participation-list tr[data-alliance-id="'+element.data("allianceId")+'"]').each((i,el)=>{if($(el).hasClass("dataHighlightSticky")){removeAllianceSticky=false}});return removeAllianceSticky};const allianceTableAddStickyByAllianceId=element=>{$('table.aa-intel-alliance-participation-list tr[data-alliance-id="'+element.data("allianceId")+'"]').each((i,el)=>{$(el).addClass("dataHighlightSticky")})};const allianceTableAddHighlightByAllianceId=element=>{$('table.aa-intel-alliance-participation-list tr[data-alliance-id="'+element.data("allianceId")+'"]').each((i,el)=>{$(el).addClass("dataHighlight")})};const allianceTableRemoveStickyByAllianceId=element=>{$('table.aa-intel-alliance-participation-list tr[data-alliance-id="'+element.data("allianceId")+'"]').each((i,el)=>{$(el).removeClass("dataHighlightSticky")})};const allianceTableRemoveHighlightByAllianceId=element=>{$('table.aa-intel-alliance-participation-list tr[data-alliance-id="'+element.data("allianceId")+'"]').each((i,el)=>{$(el).removeClass("dataHighlight")})};const corporationTableAddStickyByCorporationId=element=>{$('table.aa-intel-corporation-participation-list tr[data-corporation-id="'+element.data("corporationId")+'"]').each((i,el)=>{$(el).addClass("dataHighlightSticky")})};const corporationTableAddHighlightByCorporationId=element=>{$('table.aa-intel-corporation-participation-list tr[data-corporation-id="'+element.data("corporationId")+'"]').each((i,el)=>{$(el).addClass("dataHighlight")})};const corporationTableAddStickyByAllianceId=element=>{$('table.aa-intel-corporation-participation-list tr[data-alliance-id="'+element.data("allianceId")+'"]').each((i,el)=>{$(el).addClass("dataHighlightSticky")})};const corporationTableAddHighlightByAllianceId=element=>{$('table.aa-intel-corporation-participation-list tr[data-alliance-id="'+element.data("allianceId")+'"]').each((i,el)=>{$(el).addClass("dataHighlight")})};const corporationTableRemoveStickyByCorporationId=element=>{$('table.aa-intel-corporation-participation-list tr[data-corporation-id="'+element.data("corporationId")+'"]').each((i,el)=>{$(el).removeClass("dataHighlightSticky")})};const corporationTableRemoveHighlightByCorporationId=element=>{$('table.aa-intel-corporation-participation-list tr[data-corporation-id="'+element.data("corporationId")+'"]').each((i,el)=>{$(el).removeClass("dataHighlight")})};const corporationTableRemoveStickyByAllianceId=element=>{$('table.aa-intel-corporation-participation-list tr[data-alliance-id="'+element.data("allianceId")+'"]').each((i,el)=>{$(el).removeClass("dataHighlightSticky")})};const corporationTableRemoveHighlightByAllianceId=element=>{$('table.aa-intel-corporation-participation-list tr[data-alliance-id="'+element.data("allianceId")+'"]').each((i,el)=>{$(el).removeClass("dataHighlight")})};const pilotTableAddStickyByCorporationId=element=>{$('table.aa-intel-pilot-participation-list tr[data-corporation-id="'+element.data("corporationId")+'"]').each((i,el)=>{$(el).addClass("dataHighlightSticky")})};const pilotTableAddHighlightByCorporationId=element=>{$('table.aa-intel-pilot-participation-list tr[data-corporation-id="'+element.data("corporationId")+'"]').each((i,el)=>{$(el).addClass("dataHighlight")})};const pilotTableAddStickyByAllianceId=element=>{$('table.aa-intel-pilot-participation-list tr[data-alliance-id="'+element.data("allianceId")+'"]').each((i,el)=>{$(el).addClass("dataHighlightSticky")})};const pilotTableAddHighlightByAllianceId=element=>{$('table.aa-intel-pilot-participation-list tr[data-alliance-id="'+element.data("allianceId")+'"]').each((i,el)=>{$(el).addClass("dataHighlight")})};const pilotTableRemoveStickyByCorporationId=element=>{$('table.aa-intel-pilot-participation-list tr[data-corporation-id="'+element.data("corporationId")+'"]').each((i,el)=>{$(el).removeClass("dataHighlightSticky")})};const pilotTableRemoveHighlightByCorporationId=element=>{$('table.aa-intel-pilot-participation-list tr[data-corporation-id="'+element.data("corporationId")+'"]').each((i,el)=>{$(el).removeClass("dataHighlight")})};const pilotTableRemoveStickyByAllianceId=element=>{$('table.aa-intel-pilot-participation-list tr[data-alliance-id="'+element.data("allianceId")+'"]').each((i,el)=>{$(el).removeClass("dataHighlightSticky")})};const pilotTableRemoveHighlightByAllianceId=element=>{$('table.aa-intel-pilot-participation-list tr[data-alliance-id="'+element.data("allianceId")+'"]').each((i,el)=>{$(el).removeClass("dataHighlight")})}});